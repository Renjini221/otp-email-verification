<!DOCTYPE html>
<html>
<head>
<title>Email OTP Verification</title>
<style>
body{font-family:Arial;text-align:center;padding-top:100px;background:#f2f2f2;}
input{padding:10px;margin:10px;width:250px;}
button{padding:10px 20px;}
#msg{font-weight:bold;}
</style>
</head>
<body>

<h2>Email OTP Verification (Neon DB)</h2>

<input type="email" id="email" placeholder="Enter Email"><br>
<button onclick="sendOTP()">Send OTP</button><br>

<input type="text" id="otp" placeholder="Enter OTP"><br>
<button onclick="verifyOTP()">Verify OTP</button>

<p id="msg"></p>

<script>
async function sendOTP(){
  const email = document.getElementById("email").value;

  const res = await fetch("/api/send-otp", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ email })
  });

  const data = await res.json();
  document.getElementById("msg").innerText = data.message;
}

async function verifyOTP(){
  const email = document.getElementById("email").value;
  const otp = document.getElementById("otp").value;

  const res = await fetch("/api/verify-otp", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ email, otp })
  });

  const data = await res.json();

  if(data.success){
    document.getElementById("msg").innerText = "✅ OTP Verified Successfully!";
  } else {
    document.getElementById("msg").innerText = "❌ Invalid OTP!";
  }
}
</script>

</body>
</html>
